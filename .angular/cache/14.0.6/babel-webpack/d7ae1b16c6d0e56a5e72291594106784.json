{"ast":null,"code":"import { Customer } from './CustomerApp.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../Utilities/CustomerApp.GridComponent\";\n\nconst _c0 = function () {\n  return {\n    standalone: true\n  };\n};\n\nfunction CustComponent_form_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"form\", 3);\n    i0.ɵɵtext(1, \"\\nCustomer code: \");\n    i0.ɵɵelementStart(2, \"input\", 4);\n    i0.ɵɵlistener(\"ngModelChange\", function CustComponent_form_0_Template_input_ngModelChange_2_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.customerModel.customerCode = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"br\");\n    i0.ɵɵtext(4, \"\\nCustomer name: \");\n    i0.ɵɵelementStart(5, \"input\", 5);\n    i0.ɵɵlistener(\"ngModelChange\", function CustComponent_form_0_Template_input_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.customerModel.customerName = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"br\");\n    i0.ɵɵtext(7, \"\\nCustomer amount: \");\n    i0.ɵɵelementStart(8, \"input\", 6);\n    i0.ɵɵlistener(\"ngModelChange\", function CustComponent_form_0_Template_input_ngModelChange_8_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.customerModel.customerAmount = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"br\");\n    i0.ɵɵelementStart(10, \"input\", 7);\n    i0.ɵɵlistener(\"click\", function CustComponent_form_0_Template_input_click_10_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.Add());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"input\", 8);\n    i0.ɵɵlistener(\"click\", function CustComponent_form_0_Template_input_click_11_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.postToServer());\n    });\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.customerModel.formCustomerGroup);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.customerModel.customerCode);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.customerModel.customerName);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModelOptions\", i0.ɵɵpureFunction0(7, _c0))(\"ngModel\", ctx_r0.customerModel.customerAmount);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", !ctx_r0.customerModel.formCustomerGroup.valid);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", ctx_r0.disable);\n  }\n}\n\nfunction CustComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵtext(1, \" Customer Code format is wrong\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"hidden\", !ctx_r1.hasError(\"CustomerCodeControl\", \"pattern\"));\n  }\n}\n\nfunction CustComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵtext(1, \" Customer Code is required\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"hidden\", !ctx_r2.hasError(\"CustomerCodeControl\", \"required\"));\n  }\n}\n\nfunction CustComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵtext(1, \" Customer name is required\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"hidden\", !ctx_r3.hasError(\"CustomerNameControl\", \"required\"));\n  }\n}\n\nconst _c1 = function () {\n  return {\n    \"colName\": \"customerName\"\n  };\n};\n\nconst _c2 = function () {\n  return {\n    \"colName\": \"customerAmount\"\n  };\n};\n\nconst _c3 = function () {\n  return {\n    \"colName\": \"customerCode\"\n  };\n};\n\nconst _c4 = function (a0, a1, a2) {\n  return [a0, a1, a2];\n};\n\nexport let CustComponent = /*#__PURE__*/(() => {\n  class CustComponent {\n    constructor(_inj, http) {\n      this.http = http;\n      this.title = 'customer-app';\n      this.customerModel = new Customer();\n      this.customerModels = new Array();\n      this.disable = false;\n      this.logger = _inj.get('1');\n      this.logger.log('inside CustComponent');\n      this.getFromServer();\n    }\n\n    Add() {\n      this.customerModels.push(this.customerModel);\n      this.customerModel = new Customer(); //clear text fields\n    }\n\n    hasError(controlName, validationName) {\n      return this.customerModel.formCustomerGroup.controls[controlName].hasError(validationName);\n    }\n\n    selectCustomer(cust) {\n      this.customerModel = new Customer();\n      this.customerModel.customerAmount = cust.customerAmount;\n      this.customerModel.customerCode = cust.customerCode;\n      this.customerModel.customerName = cust.customerName;\n    }\n\n    postToServer() {\n      var custDto = {};\n      custDto.customerName = this.customerModel.customerName;\n      custDto.customerCode = this.customerModel.customerCode;\n      custDto.customerAmount = this.customerModel.customerAmount;\n      this.disable = true;\n      this.http.post(\"http://localhost:3000/customers\", custDto).subscribe(res => this.success(res), res => this.failure(res));\n    }\n\n    getFromServer() {\n      this.http.get(\"http://localhost:3000/customers\").subscribe(res => this.successGet(res), res => this.failure(res));\n    }\n\n    success(res) {\n      this.getFromServer();\n    }\n\n    successGet(res) {\n      this.customerModels = res;\n      this.customerModel = new Customer();\n      this.disable = false;\n    }\n\n    failure(res) {\n      console.error(\"Error from me::\" + res);\n    }\n\n  }\n\n  CustComponent.ɵfac = function CustComponent_Factory(t) {\n    return new (t || CustComponent)(i0.ɵɵdirectiveInject(i0.Injector), i0.ɵɵdirectiveInject(i1.HttpClient));\n  };\n\n  CustComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CustComponent,\n    selectors: [[\"ng-component\"]],\n    decls: 8,\n    vars: 13,\n    consts: [[3, \"formGroup\", 4, \"ngIf\"], [3, \"hidden\", 4, \"ngIf\"], [\"type-of-data\", \"'Customer'\", 3, \"grid-columns\", \"grid-data\", \"grid-selected\"], [3, \"formGroup\"], [\"type\", \"text\", \"id\", \"custCode\", \"formControlName\", \"CustomerCodeControl\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"id\", \"custName\", \"formControlName\", \"CustomerNameControl\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"id\", \"custAmt\", 3, \"ngModelOptions\", \"ngModel\", \"ngModelChange\"], [\"type\", \"button\", \"value\", \"Add Tempararily\", 3, \"disabled\", \"click\"], [\"type\", \"button\", \"id\", \"btnadd\", \"value\", \"Add Permenently\", 3, \"disabled\", \"click\"], [3, \"hidden\"]],\n    template: function CustComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, CustComponent_form_0_Template, 12, 8, \"form\", 0);\n        i0.ɵɵtemplate(1, CustComponent_div_1_Template, 2, 1, \"div\", 1);\n        i0.ɵɵelement(2, \"br\");\n        i0.ɵɵtemplate(3, CustComponent_div_3_Template, 2, 1, \"div\", 1);\n        i0.ɵɵelement(4, \"br\");\n        i0.ɵɵtemplate(5, CustComponent_div_5_Template, 2, 1, \"div\", 1);\n        i0.ɵɵelement(6, \"br\");\n        i0.ɵɵelementStart(7, \"grid-ui\", 2);\n        i0.ɵɵlistener(\"grid-selected\", function CustComponent_Template_grid_ui_grid_selected_7_listener($event) {\n          return ctx.selectCustomer($event);\n        });\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.customerModel.formCustomerGroup);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.customerModel.formCustomerGroup && ctx.customerModel.formCustomerGroup.dirty);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.customerModel.formCustomerGroup && ctx.customerModel.formCustomerGroup.dirty);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.customerModel.formCustomerGroup && ctx.customerModel.formCustomerGroup.dirty);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"grid-columns\", i0.ɵɵpureFunction3(9, _c4, i0.ɵɵpureFunction0(6, _c1), i0.ɵɵpureFunction0(7, _c2), i0.ɵɵpureFunction0(8, _c3)))(\"grid-data\", ctx.customerModels);\n      }\n    },\n    dependencies: [i2.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.NgModel, i3.FormGroupDirective, i3.FormControlName, i4.GridComponent],\n    encapsulation: 2\n  });\n  return CustComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}